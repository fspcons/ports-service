# Ports Service

### initial notes
The project requires the **ports.json** file inside the **data** folder, however I added the 
folder to the git ignore, so I wouldn't push the entire file into the GitHub repo.
So before start reviewing the code, please add the file to the folder so everything works.

I managed to write all the code inside the 2 hours window, however I had to spend a bit more
time to write some comments and the readme docs to explain my line of thought.
To achieve that however I left a bunch of parts with comments instead of actual code.

I followed the suggestion of making an in-memory database instead of implementing, let's say, a postgres
DAO, but in this case, I'd use a lib such as [Goose](https://github.com/pressly/goose) or anything similar
to manage the migrations for the database structure.


### run instructions

Here goes the following Makefile options:

* **run**: runs the service locally

        make run

* **test**: runs the bash script for the unit tests and lint checks

        make test

* **run-docker**: executes the docker-compose file

        make run-docker

* **stop-docker**: stops the containers started by the _run-docker_ instruction

        make stop-docker

* **sec**: executes the **gosec** validation on the repo's code.

        make sec

* **docs**: executes the swaggo command to update the Open API docs generated by the comments.

        make docs

### tests

*In there interest of time I did not test everything I wanted to, however I'd add more them in a real project.*

### libs used

* [Uber's dig (dependency injection)](https://github.com/uber-go/dig)
    * I added this dependency injection lib knowing it uses reflection and the risks,
      however, the performance toll only affects the application start, and it allows for a much
      cleaner start up code.

* [Uber's Zap (logs)](https://github.com/uber-go/zap)
    * Super fast logging library.

* [Echo](https://github.com/labstack/echo)
    * High performance, extensible, minimalist Go web framework

* [Swaggo](https://github.com/swaggo/swag) && [Echo swagger](https://github.com/swaggo/echo-swagger)
    * Open API code generation tool based on code's comments (with Echo support)

* [Moq](https://github.com/matryer/moq)
    * Interface mocking tool for go generate that would be used for mocking on gateway/usecase unit tests.

### additional lint/checks

On a real project I'd likely add the following to the PR actions workflow:
 
* [Go Vulnerability Management](https://github.com/golang/vuln)
* [Haskell Dockerfile Linter](https://github.com/hadolint/hadolint)
* [Semgrep](https://semgrep.dev/)
